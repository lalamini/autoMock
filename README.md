# autoMock

This project will automatic generate Mock data for front-end test

这个项目主要是用来自动化生成前端所需要的Mock数据的工具

## 目的

我们在做前端测试的时候，总是会遇到这样那样的问题，有时候确实是前端的问题，有时候是后端的问题。 所以通常都希望能够有一个挡板程序，把预期正确的数据发送过来，让我们能顺利的检验前端的表现是不是正确。

如果你求助于开发人员，在进度已经很赶的情况下，开发人员基本不可能给你做一套挡板代码，所以你的前端测试进程始终被后端的数据/代码所干扰。

有时候，你所依赖的各种后端还有时效性，譬如证券市场，早上9点半开始，下午3点后就结束了，3点半之后，基本没办法在做有效的测试了。

所以才会有了这个项目，可以自己生成Mock数据的项目。

## 基于原则

并不是所有的项目都可以使用

   1. 前端不参与身份/数据校验
   
   前端不参与身份/数据校验，仅后端参与身份/数据校验的应用程序； 这种结构的app，数据才不具有实效性。 mock数据不需要关心加/解密的流程。
   
   2. 前端所发起的请求，需要包含一个原来目的ip的字段[Host]
   
   包含了[Host]字段，并且Charles需要打开[Presever Host header]选项，bridge模式下，才能够让mock平台准确的转发前端的请求到指定的后端

## 系统构成

我们是用来做手机UI测试的，就手机来说， 需要 Charles 做转发，需要一台带有容器环境的Linux以及一套mysql数据库

我所提供的代码里面，包含一个容器制作的脚本，以及名为start.sh的容器启动脚本

## 使用方法

start.sh 脚本里面有两条指令，一条指令启动bridge工作模式，一条指令启动proxy工作模式。

   1. bridge 工作模式
   
   当要记录前后端的通讯时，使用bridge工作模式，此时，前端和后段正常通讯，所有操作和平时的测试方式一至，mock平台会记录所有的操作（请求和响应）进入mysql数据库备用。

   2. proxy 工作模式
   
   当要使用挡板模式时，使用proxy工作模式，此时，前端发起的请求，会被mock平台阻拦，并从已经存储的mysql中找出响应的response 返回给前端。
   
   3. django创建数据库
   
   uiMock文件目录中的setting文件修改数据库相关信息，然后执行django标准的数据库创建命令。





